var app=angular.module("autoCompleteApp",[]);app.controller("formController",["$scope","$http","$interval",function(a,b,c){a.resultList=[],a.productDetail=null,a.message=null,a.currentCursor=-1;var d;a.moveHelper=function(b){if(0!==a.resultList.length){if(38===b){if(a.currentCursor===-1)return void(a.currentCursor=a.resultList.length-1);a.currentCursor--}if(40===b){if(a.currentCursor===a.resultList.length-1)return void(a.currentCursor=-1);a.currentCursor++}}},a.move=function(){d||(a.moveHelper(event.keyCode),d=c(a.moveHelper.bind(a,event.keyCode),200))},a.complete=function(){if(c.cancel(d),d=void 0,13===event.keyCode){if(0===a.resultList.length)return!1;a.product=a.resultList[a.currentCursor],a.submit()}if(a.product&&0!==a.product.replace(/^\s+|\s+$/g,"").length){var e=a.product.replace(/^\s+|\s+$/g,"");b.get("/complete?term="+e).then(function(b){a.resultList=b.data},function(a){})}},a.fillForm=function(b){a.product=b,a.submit(!0)},a.submit=function(c){return a.resultList.length>0&&a.currentCursor>=0&&!c&&(a.product=a.resultList[a.currentCursor]),a.resultList.length=0,a.message=null,a.productDetail=null,!!a.product&&void b.get("/product?name="+a.product).then(function(b){return 0===b.data.length?void(a.message="No match records"):void(a.productDetail=b.data)},function(b){a.error="Failed to get the data, please try again"})}}]);